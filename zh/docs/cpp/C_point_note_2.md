在 C 中动态分配内存的基本步骤有：

1. 用 malloc 类的函数分配内存
2. 用这些内存支持应用程序
3. 用 free 函数释放内存

### 程序栈

程序栈是支持函数执行的内存区域, 通常和堆共享. 也就是说, 它们共享同一块内存区域.

程序栈存放栈帧（stack frame）, 栈帧有时候也称为活跃记录（activation record）或活跃帧（activation frame）. 栈帧存放函数参数和局部变量.

### 栈帧的组织

- 返回地址: 函数完成后要返回的程序内部地址
- 局部数据存储: 为局部变量分配的内存
- 参数存储: 为函数参数分配的内存
- 栈指针和基指针: 运行时系统用来管理栈的指针.

### 返回指针

返回指针很容易, 只要返回的类型是某种数据类型的指针即可. 从函数返回对象时经常用到以下两种技术.

- 使用 malloc 在函数内部分配内存并返回其地址. 调用者负责释放返回的内存
- 传递一个对象给函数并让函数修改它. 这样分配和释放对象的内存都是调用者的责任
- 从函数返回指针时可能存在几个潜在的问题, 包括：
- 返回未初始化的指针；
- 返回指向无效地址的指针；
- 返回局部变量的指针；
- 返回指针但是没有释放内存.
