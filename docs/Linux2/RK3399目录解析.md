## uboot kernel andorid

- abi 应用程序二进制接口,描述了应用程序和操作系统之间, 一个应用和它的库之间, 或者应用的组成部分之间的低接口 .
- art 和 android runtime 相关的文件, 即 ART 模式
- bionic 是 Android 的 C 库文件目录 bionic 解析
- bootable 启动引导相关代码
- build 存放 Android 系统编译规则
  - build/envsetup.sh Android SDK 环境
  - build/target/product/xxx.mk Android 文件系统编译规则
  - build/tools/buildinfo.sh -> out/target/product/rk3399_embeded/- system/build.prop 系统配置
- build.sh 编译脚本
- compatibility
- cts Android 兼容性测试套件标准
- dalvik dalvik JAVA 虚拟机
- developers 开发者目录
- development 应用程序开发相关
- device 板级配置、预置文件、开机脚本
  - device/rockchip/rk3399/AndroidProducts.mk 设备相关
  - device/rockchip/rk3399/rk3399_embeded.mk 设备名 配置信息 复制 脚本
  - device/rockchip/rk3399/rk3399_embeded/ 板级相关配置文件, 脚本、分区、预安装、
- external android 使用的一些开源的模块
- frameworks 核心框架——java 及 C++语言
  - Launcher Setting Activity Service
- hardware 部分厂家开源的硬解适配层 HAL 代码
  - 例如修改摄像头 Hal 层配置：hardware/rockchip/camera/CameraHal/CameraHal_Module.h
  - /hardware/libhardware_legacy:老式的 HAL 结构, 采用直接调用 so 动态链接库方式.
  - /hardware/libhardware:新式 HAL 结构, 采用 Stub 代理方式调用.
  - /hardware/ril:RIL(Radio Interface Layer,无线通信接口层)
- javaenv.sh jdk 环境脚本
- kernel 内核
- libcore 内核库文件
- libnativehelper 本地库文件, 主要用于注册 JAVA 本地调用函数
- Makefile 局 Makefile 文件, 用来定义编译规则
- mkimage.sh 镜像打包脚本, 统一拷贝到 rockdev/
- ndk NDK 相关代码, 帮助开发人员在应用程序中嵌入 C/C++代码
- out Android 编译完成后的代码输出与此目录
- packages 应用程序包 包含 Launcher
- pdk 平台开发工具包
- platform_testing 测试
- prebuilts x86 和 arm 架构下预编译的一些资源,uboot kenerl 编译工具链
- rkst rk 关键二进制文件, uboot 编译用到（待定）
- RKTools rk 工具
- rockdev rk 脚本打包输出目录
- sdk sdk 及模拟器
- system 底层文件系统库、应用及组件——C 语言
- toolchain 工具链
- tools 工具
- u-boot u-boot
- vendor 厂商定制

## Uboot 目录解析

一般居于汇编+C, 与单片机逻辑程序类似, 关闭看门狗, 改变系统时钟, 初始化存储控制器, 将需要运行的代码复制到内存中等.

![XxlCuG](https://raw.githubusercontent.com/mikaelzero/ImageSource/main/uPic/XxlCuG.jpg)

- api : 存放 uboot 提供的接口函数
- arch : 与体系结构相关的代码, uboot 的重头戏
- board : 根据不同开发板定制的代码, 代码也不少
- common : 通用的代码, 涵盖各个方面, 以命令行处理为主
- disk : 磁盘分区相关代码
- doc : 文档, 一堆 README 开头的文件
- drivers : 驱动, 很丰富, 每种类型的设备驱动占用一个子目录
- examples : 示例程序
- fs : 文件系统, 支持嵌入式开发板常见的文件系统
- include : 头文件, 已通用的头文件为主
- lib : 通用库文件
- nand_spl : NAND 存储器相关代码
- net : 网络相关代码, 小型的协议栈
- onenand_ipl
- post : 加电自检程序
- tools : 辅助程序, 用于编译和检查 uboot 目标文件

## Kenerl 目录解析

- COPYING 许可和授权信息.
- CREDITS 贡献者列表
- Documentation
  - Documentation/gpio/gpio.txt 与 drivers 下的模块对应
  - Documentation/input/input.txt
  - Documentation/leds/leds-class.txt
- Kbuild 这是一个设置一些内核设定的脚本.
- Kconfig 这个脚本会在开发人员配置内核的时候用到
- MAINTAINERS 这是一个目前维护者列表, 他们的电子邮件地址, 主页
- Makefile 这个脚本是编译内核的主要文件.
- Module.symvers
- README
- REPORTING-BUGS 这个文档提供如何报告问题的信息.
- System.map
- arch 每个支持的处理器架构都在它相应的文件夹中, 由 KConfig 维护, DTS 也在其中修改.
  - arch/arm64/boot/dts/rockchip/xxxx.dts
- backported-features
- block 此文件夹包含块设备驱动程序的代码
- crypto 这个文件夹包含许多加密算法的源代码
- drivers 目录包含了驱动代码, 添加修改驱动位置
- firmware 包含让计算机读取和理解从设备发来的信号的代码. 举例来说, 一个摄像头管理它自己的硬件, 但计算机必须了解摄像头给计算机发送的信号. Linux 系统会使用 vicam 固件（firmware）来理解摄像头的通讯. 否则, 没有了固件, Linux 系统将不知道如何处理摄像头发来的信息. 另外, 固件同样有助于将 Linux 系统发送消息给该设备. 这样 Linux 系统可以告诉摄像头重新调整或关闭摄像头.
- fs 这是文件系统的文件夹. 理解和使用的文件系统所需要的所有的代码就在这里. 在这个文件夹里, 每种文件系统都有自己的文件夹. 例如, ext4 文件系统的代码在 ext4 文件夹内. 在 fs 文件夹内, 开发者会看到一些不在文件夹中的文件.
- include include 包含了内核所需的各种头文件.
- init init 文件夹包含了内核启动的处理代码(INITiation).
- ipc init 文件夹包含了内核启动的处理代码(INITiation).
- kernel 这个文件夹中的代码控制内核本身.
- lib 这个文件夹包含了内核需要引用的一系列内核库文件代码.
- logo.bmp
- mm mm 文件夹中包含了内存管理代码.
- net net 文件夹中包含了网络协议代码.
- samples 此文件夹包含了程序示例和正在编写中的模块代码.
- scripts 这个文件夹有内核编译所需的脚本.
- security 这个文件夹是有关内核安全的代码.
- sound 这个文件夹中包含了声卡驱动.
- tools 这个文件夹中包含了和内核交互的工具.
- usr 该目录中的代码为内核尚未完全启动时执行用户空间代码提供了支持
- virt 此文件夹包含了虚拟化代码, 它允许用户一次运行多个操作系统.

## AndroidSDK 目录

### 主 SDK 目录解析

- abi 应用程序二进制接口
- art 全新的 ART 运行环境
- bionic 系统 C 库
- bootable 启动引导相关代码
- build 存放系统编译规则及 generic 等基础开发包配置
- cts Android 兼容性测试套件标准
- dalvik dalvik 虚拟机
- developers 开发者目录
- development 应用程序开发相关
- device 设备相关配置
- docs 参考文档目录
- external 开源模组相关文件
- frameworks 应用程序框架, Android 系统核心部分, 由 Java 和 C++编写
- hardware 主要是硬件抽象层的代码
- libcore 核心库相关文件
- libnativehelper 动态库, 实现 JNI 库的基础
- ndk NDK 相关代码, 帮助开发人员在应用程序中嵌入 C/C++代码
- out 编译完成后代码输出在此目录
- packages 应用程序包
- pdk Plug Development Kit 的缩写, 本地开发套件
- platform_testing 平台测试
- prebuilts x86 和 arm 架构下预编译的一些资源
- sdk sdk 和模拟器
- system 底层文件系统库、应用和组件
- toolchain 工具链文件
- tools 工具文件
- Makefile 全局 Makefile 文件, 用来定义编译规则

### Framworks 目录解析

- Av 多媒体框架
- base
- api android api
- core framwork 核心库
- data 字体和声音数据
- docs 文档
- drm 数据保护
- keystore 数据签名证书
- libs lib 库
- media
- Compile 编译相关
- Ex ex 文件解析器
- Minikin 原生字体
- Ml 机器学习
- native
- aidl aidl 层
- build 编译配置
- include 头文件
- libs 库
- Opt 一些工具软件
- Support
- Volley 谷歌网络开源库
- Webview webview framework 接口

## 烧录固件目录解析(最终开发板上的目录)

- init 系统启动文件 FYI:cat init.rk3399.rc
- /system
- app 系统应用安装目录
- bin 常用的系统本地命令（二进制）, 大部分是 toolbox 的链接（类似于嵌入式 Linux 中的 busybox）
- etc 系统配置文件, 如 hosts
- font 字体目录
- framework Java 平台架构核心库, jar 包和 odex 优化的文件
- lib 系统底层共享库, .so 库文件
- xbin 不常用的系统管理工具, 相当于 linux 的/sbin
- media
- audio 铃声, 提示音等音频文件, .ogg
- notifications 通知
- ui 界面
- alarms 警告
- ringtones 铃声
- usr 用户文件夹
- keychars
- keylayout
- share
- srec 配置
- vendor 厂商的文件, 一般是驱动和厂家的东西, 如 RK 和高通自己的文件.
- build.prop 系统设置和变更属性, 可以 pull 下来修改快速验证
- /etc --> /system/etc
- /vendor --> /system/vendor
- /dev 存放设备节点文件, 更多的是你真是物理设备的接口, 提供这些接口你可以对设备进行 IO 操作
- /sys 是一个基于 RAM 的 FS, / sys 将各种内核子系统, 硬件设备和相关设备驱动程序的信息, 从内核的设备模型导出到用户空间, 进而提供一组虚拟文件.
  - /proc 全局系统信息,正在运行的内核信息映射 Android 系统/proc 目录
  - /data 用户软件和各种数据
  - local/tmp 　　临时目录, 无权限要求
  - app 普通程序安装目录
  - system
  - location 其中的 location.gps 记录最后的坐标, LocationManager.getLastKnownLocation()数据来自此处
- data
- <package_name>
- files Context.getFilesDir() , Context.openFileOutput() 获取的目录, 应用安装目录下
- cache Context.getCacheDir() 获取的目录, 应用安装目录下, 系统会自动在内存不足或目录大小达到特定数值时自动清理.
- shared_pref Context.getSharedPreferences() 建立的 preferences 文件（xml）存放目录
- anr 应用发生 ANR（Applicaiton is Not Responding）时, Android 将问题点的堆栈写入到 traces.txt 文件中
- location
- property 其中 persist.sys.timezone 记录系统时区
- /sdcard -->/storage/emulated/legacy SD 卡的 FAT32 文件系统挂载到此目录
- Android
- - data
- <package_name> 应用的额外数据, 应用卸载时自动删除.
- files Context.getExternalFilesDir()获取的目录. 设置->应用->具体应用详情-> 清除数据 操作对象就是这个目录.
- cache Context.getExternalCacheDir()获取的缓存目录. 设置->应用->具体应用详情-> 清除缓存 操作对象就是这个目录.
- lost+found
- yaffs 文件系统固有的, 类似回收站的文件夹.

参考：https://x509p6c8to.feishu.cn/docs/doccncfkqGDf9gydzQEPDp86LLd#HoHNLZ
